(self.webpackChunk=self.webpackChunk||[]).push([[143],{9584:(t,e,s)=>{"use strict";var a=s(538),i=s(8620),r=s(9516),n=s(8345);s(9070);function o(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,a;return e=t,(s=[{key:"setAuthToken",value:function(t){localStorage.setItem("authToken",t)}},{key:"getAuthToken",value:function(){localStorage.getItem("authToken")}},{key:"hasAuthToken",value:function(){var t=localStorage.getItem("authToken");return null!==t&&""!==t}},{key:"deleteToken",value:function(){localStorage.removeItem("authToken")}}])&&o(e.prototype,s),a&&o(e,a),t}(),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Главная страница")]),t._v(" "),s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)};c._withStripped=!0;const v={};var d=s(1900),m=(0,d.Z)(v,c,[],!1,null,null,null);m.options.__file="assets/components/MainpageComponent.vue";const u=m.exports;var p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("Авторизация")]),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.submitLogin}},[s("div",[t.invalidLogin?s("div",{staticClass:"top_error"},[t._v("Неправильное имя пользователя или пароль")]):t._e(),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.email.$error}},[s("label",{staticClass:"form__label"},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$dirty?s("div",[t.$v.email.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваш email")]),t._v(" "),t.$v.email.email?t._e():s("div",{staticClass:"error"},[t._v("Укажите корректный email")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.password.$error}},[s("label",{staticClass:"form__label"},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.password.$model,expression:"$v.password.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.password.$dirty?s("div",[t.$v.password.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваш пароль")]),t._v(" "),t.$v.password.minLength&&t.$v.password.maxLength?t._e():s("div",{staticClass:"error"},[t._v("Пароль должен быть от "+t._s(t.$v.password.$params.minLength.min)+" до "+t._s(t.$v.password.$params.maxLength.max))])]):t._e()]),t._v(" "),t._m(0),t._v(" "),s("router-link",{attrs:{to:"/sign-up"}},[t._v("Зарегистрироваться")]),s("br"),t._v(" "),s("router-link",{attrs:{to:"/reset-password"}},[t._v("Забыли пароль?")])],1)])])])])])])};p._withStripped=!0;s(4812);const _="";var $=s(9669),f=s.n($);function h(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=_+"/api"}var e,s,a;return e=t,(s=[{key:"post",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null,r=new l;r.hasAuthToken()&&r.getAuthToken(),f().post(this.baseUrl+t,e,i).then((function(t){return s(t.data)}),(function(t){return a(t.response.data)}))}}])&&h(e.prototype,s),a&&h(e,a),t}(),C=s(379),w=s(8107),b=s(5287);const k={mounted:function(){},data:function(){return{email:"",password:"",invalidLogin:!1}},validations:{email:{required:C.C1,email:w.default},password:{required:C.C1,minLength:(0,C.Ei)(6),maxLength:(0,b.default)(128)}},methods:{submitLogin:function(t){(t.preventDefault(),this.$v.$touch(),this.$v.$invalid)||(new g).post("/auth/email/login",{email:this.email,password:this.password},function(t){console.log(t),(new l).setAuthToken(t.data.token),this.$router.push("/user/cabinet")}.bind(this),function(t){"Invalid username or password"===t.error.message&&(this.invalidLogin=!0)}.bind(this))}}};var y=(0,d.Z)(k,p,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Войти")])])}],!1,null,null,null);y.options.__file="assets/components/User/LoginComponent.vue";const x=y.exports;var E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Рабочий стол")]),t._v(" "),s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)};E._withStripped=!0;const S={};var P=(0,d.Z)(S,E,[],!1,null,null,null);P.options.__file="assets/components/AdminDesktop/AdminDesktopComponent.vue";P.exports;var L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Личный кабинет")]),t._v(" "),s("button",{on:{click:function(e){return t.logout()}}},[t._v("Выйти")])])};L._withStripped=!0;const A={mounted:function(){},data:function(){return{}},methods:{logout:function(t){(new l).deleteToken(),this.$router.push("/")}}};var Z=(0,d.Z)(A,L,[],!1,null,null,null);Z.options.__file="assets/components/PersonalCabinet/PersonalCabinetComponent.vue";const U=Z.exports;var T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("Регистрация")]),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.submitSignup}},[s("div",[t.invalidEmail?s("div",{staticClass:"top_error"},[t._v("Указанный вами email уже зарегистрирован")]):t._e(),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.email.$error}},[s("label",{staticClass:"form__label"},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$dirty?s("div",[t.$v.email.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваш email")]),t._v(" "),t.$v.email.email?t._e():s("div",{staticClass:"error"},[t._v("Укажите корректный email")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.nickname.$error}},[s("label",{staticClass:"form__label"},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.nickname.$model,expression:"$v.nickname.$model",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.$v.nickname.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.nickname,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.nickname.$dirty?s("div",[t.$v.nickname.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваше имя")]),t._v(" "),t.$v.nickname.minLength&&t.$v.nickname.maxLength?t._e():s("div",{staticClass:"error"},[t._v("Имя должно быть от "+t._s(t.$v.nickname.$params.minLength.min)+" до "+t._s(t.$v.nickname.$params.maxLength.max))]),t._v(" "),t.$v.nickname.nickname?t._e():s("div",{staticClass:"error"},[t._v("Имя может содержать только английские и русские буквы")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.password.$error}},[s("label",{staticClass:"form__label"},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.password.$model,expression:"$v.password.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.password.$dirty?s("div",[t.$v.password.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваш пароль")]),t._v(" "),t.$v.password.minLength&&t.$v.password.maxLength?t._e():s("div",{staticClass:"error"},[t._v("Пароль должен быть от "+t._s(t.$v.password.$params.minLength.min)+" до "+t._s(t.$v.password.$params.maxLength.max))]),t._v(" "),t.$v.password.pass?t._e():s("div",{staticClass:"error"},[t._v("Пароль может содержать только английские буквы, а также символы !@#$%^&*()-_=+")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.accept.$model,expression:"$v.accept.$model"}],attrs:{type:"checkbox",id:"accept",value:"Джек"},domProps:{checked:Array.isArray(t.$v.accept.$model)?t._i(t.$v.accept.$model,"Джек")>-1:t.$v.accept.$model},on:{change:function(e){var s=t.$v.accept.$model,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r="Джек",n=t._i(s,r);a.checked?n<0&&t.$set(t.$v.accept,"$model",s.concat([r])):n>-1&&t.$set(t.$v.accept,"$model",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.$v.accept,"$model",i)}}}),t._v(" "),s("label",{attrs:{for:"accept"}},[t._v("Я согласен с условиями оферты")]),t._v(" "),t.$v.accept.$dirty?s("div",[t.$v.accept.required?t._e():s("div",{staticClass:"error"},[t._v("Необходимо дать согласие")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.sendProcess}},[t._v("Регистрация")])]),t._v(" "),s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])])};T._withStripped=!0;var q=C.BM.regex("nickname",/^[a-zA-Zа-яА-Я]+$/),j=C.BM.regex("pass",/^[a-zA-Z0-9\!\@\#\$\%\^\&\*\(\)\-\_\=\+]+$/);const N={mounted:function(){},data:function(){return{sendProcess:!1,email:"",password:"",nickname:"",accept:"",invalidEmail:!1}},validations:{email:{required:C.C1,email:w.default},password:{required:C.C1,minLength:(0,C.Ei)(6),maxLength:(0,b.default)(128),pass:j},nickname:{required:C.C1,minLength:(0,C.Ei)(2),maxLength:(0,b.default)(32),nickname:q},accept:{required:C.C1}},methods:{submitSignup:function(t){(t.preventDefault(),this.$v.$touch(),this.$v.$invalid)||(this.invalidEmail=!1,this.sendProcess=!0,(new g).post("/auth/email/sign-up",{email:this.email,password:this.password,nickname:this.nickname},function(t){var e=this;console.log(t),this.$swal.fire("Регистрация прошла успешно!","На указанный вами email была отправлена инструкция по активации аккаунта","success").then((function(t){e.$router.push("/login")}))}.bind(this),function(t){console.log(t),this.sendProcess=!1,"User with this email is already registered"===t.error.message&&(this.invalidEmail=!0)}.bind(this)))}}};var D=(0,d.Z)(N,T,[],!1,null,null,null);D.options.__file="assets/components/User/SignupComponent.vue";const I=D.exports;var O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h1",{staticStyle:{"text-align":"center"}},[t._v("Аккаунт успешно активирован")]),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"text-align":"center"}},[s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])};O._withStripped=!0;const M={};var R=(0,d.Z)(M,O,[],!1,null,null,null);R.options.__file="assets/components/User/AccountActivatedComponent.vue";const z=R.exports;var B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h1",{staticStyle:{"text-align":"center"}},[t._v("Ссылка устарела или некорректна")]),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"text-align":"center"}},[s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])};B._withStripped=!0;const F={};var G=(0,d.Z)(F,B,[],!1,null,null,null);G.options.__file="assets/components/User/AccountActivationFailedComponent.vue";const H=G.exports;var J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._v("Восстановление пароля")]),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.submitReset}},[s("div",[t.invalidEmail?s("div",{staticClass:"top_error"},[t._v("Указанный email не зарегистрирован")]):t._e(),t._v(" "),s("div",{staticClass:"form-group",class:{"form-group--error":t.$v.email.$error}},[s("label",{staticClass:"form__label"},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$dirty?s("div",[t.$v.email.required?t._e():s("div",{staticClass:"error"},[t._v("Укажите ваш email")]),t._v(" "),t.$v.email.email?t._e():s("div",{staticClass:"error"},[t._v("Укажите корректный email")])]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.sendProcess}},[t._v("Восстановить пароль")])]),t._v(" "),s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])])};J._withStripped=!0;const K={mounted:function(){},data:function(){return{sendProcess:!1,email:"",invalidEmail:!1}},validations:{email:{required:C.C1,email:w.default}},methods:{submitReset:function(t){(t.preventDefault(),this.$v.$touch(),this.$v.$invalid)||(this.sendProcess=!0,this.invalidEmail=!1,(new g).post("/auth/email/reset-password",{email:this.email},function(t){var e=this;console.log(t),this.$swal.fire("Готово!","На указанный вами email была отправлена инструкция по восстановлению пароля","success").then((function(t){e.$router.push("/user/cabinet")}))}.bind(this),function(t){this.sendProcess=!1,"User not found"===t.error.message&&(this.invalidEmail=!0)}.bind(this)))}}};var Q=(0,d.Z)(K,J,[],!1,null,null,null);Q.options.__file="assets/components/User/ResetPasswordComponent.vue";const V=Q.exports;var W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h1",{staticStyle:{"text-align":"center"}},[t._v("Новый пароль отправлен на ваш email")]),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"text-align":"center"}},[s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])};W._withStripped=!0;const X={};var Y=(0,d.Z)(X,W,[],!1,null,null,null);Y.options.__file="assets/components/User/PasswordChangedComponent.vue";const tt=Y.exports;var et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h1",{staticStyle:{"text-align":"center"}},[t._v("Ссылка устарела или некорректна")]),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"text-align":"center"}},[s("router-link",{attrs:{to:"/login"}},[t._v("Войти")])],1)])])])])])};et._withStripped=!0;const st={};var at=(0,d.Z)(st,et,[],!1,null,null,null);at.options.__file="assets/components/User/PasswordChangeFailedComponent.vue";const it=at.exports;a.Z.use(n.Z);var rt=[{path:"/",component:u},{path:"/login",component:x},{path:"/sign-up",component:I},{path:"/user/cabinet",component:U,meta:{auth:!0}},{path:"/account-activated",component:z},{path:"/account-activation-filed",component:H},{path:"/reset-password",component:V},{path:"/password-changed",component:tt},{path:"/password-change-filed",component:it}],nt=new n.Z({mode:"history",routes:rt});const ot=nt;nt.beforeEach((function(t,e,s){if((console.log(t),t.meta.auth)&&!(new l).hasAuthToken())return s("/login");return s()}));var lt=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)};lt._withStripped=!0;const ct={name:"App"};var vt=(0,d.Z)(ct,lt,[],!1,null,"38d3c614",null);vt.options.__file="assets/components/App.vue";const dt=vt.exports;a.Z.use(i.ZP),a.Z.use(r.Z),new a.Z({components:{App:dt},template:"<App/>",router:ot}).$mount("#app")}},t=>{"use strict";t.O(0,[98],(()=>{return e=9584,t(t.s=e);var e}));t.O()}]);